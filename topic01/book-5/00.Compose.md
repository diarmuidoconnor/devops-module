˙˙## Continuous integration (CI).

In this lab, we will delve into the crucial role of continuous integration in an application's development process using the Gitlab CI service. The CI pipeline, a key component, will be focused on automating the build and package tasks using the containerisation technology covered earlier in the module.

## Setup.

In a browser tab, log in to your Gitlab account. Mouse-over the icon at the top left corner of the page to open the sidebar. Follow these steps:

+ Click the plus (+) symbol, and select New Project/Repository. 
+ Select Create blank project.
+ Name the project 'docker-user-profile-app' (exactly).
+ Set the Visibility mode to Public.
+ Untick both Project Configuration options.
+ Click the Create Project button.

In VS Code, import the User Profile web app. Open an integrated terminal and type the command:
~~~bash
$ git remote add origin [the URL of the new Gitlab repository]
$ git branch main
$ dit checkout main
$ git push origin main
~~~
(Gitlab prefers the name main instead of master for the core branch of a repository )
Refresh the repository page on the browser.

## Skeleton CI pipeline.
In VS Code, add a new file called `.gitlab-ci.yml` to the project's base folder. Copy in the following code:
~~~yaml
variables:
 
  DOCKER_TAG: ${CI_COMMIT_SHORT_SHA}
  APP_NAME: 'profileapp'
  DOCKER_HUB_USERNAME: 'doconnor'

stages:
 - build
 - test

build-and-publish:
  image: docker:20.10.16
  stage: build
  script:
 - echo "Build stage executed"
- docker --version

test-withcurl:
  stage: test
  image: docker:20.10.16
  before_script:
 -  - docker network create mongo-network
  script: 
    
~~~
